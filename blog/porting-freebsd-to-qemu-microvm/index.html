<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:125%/1.66 'ff-tisa-web-pro',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'ff-tisa-web-pro',serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;color:inherit;font-family:'Futura',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;color:inherit;font-family:'Futura',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;color:inherit;font-family:'Futura',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;color:inherit;font-family:'Futura',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;color:inherit;font-family:'Futura',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;color:inherit;font-family:'Futura',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}ul{margin-left:1.66rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.66rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;font-size:0.85rem;line-height:1.66rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;font-size:1rem;line-height:1.66rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}blockquote{margin-left:1.66rem;margin-right:1.66rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.66rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.66rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.66rem;margin-bottom:calc(1.66rem / 2);margin-top:calc(1.66rem / 2);}li > ul{margin-left:1.66rem;margin-bottom:calc(1.66rem / 2);margin-top:calc(1.66rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.66rem / 2);}code{font-size:0.85rem;line-height:1.66rem;}kbd{font-size:0.85rem;line-height:1.66rem;}samp{font-size:0.85rem;line-height:1.66rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.10667rem;padding-right:1.10667rem;padding-top:0.83rem;padding-bottom:calc(0.83rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover"/><meta data-react-helmet="true" name="twitter:image" content="https://nobinpegasus.github.io/assets/bg/bg.jpg"/><meta data-react-helmet="true" name="twitter:description" content="Recently I got started with FreeBSD kernel and came across this interesting article from  Tim Jones . It mainly focuses on the author&#x27;s effort to port the FreeBSD kernel to qemu microVM. I&#x27;m step by step reproducing it. To reproduce it first I had to check if the qemu MicroVM was fully functioning or not. First I…"/><meta data-react-helmet="true" name="twitter:url" content="https://nobinpegasus.github.io"/><meta data-react-helmet="true" name="twitter:title" content="Porting FreeBSD to qemu MicroVM"/><meta data-react-helmet="true" name="twitter:creator" content="@zeshan_nobin"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" property="og:image" content="https://nobinpegasus.github.io/assets/bg/bg.jpg"/><meta data-react-helmet="true" property="og:description" content="Recently I got started with FreeBSD kernel and came across this interesting article from  Tim Jones . It mainly focuses on the author&#x27;s effort to port the FreeBSD kernel to qemu microVM. I&#x27;m step by step reproducing it. To reproduce it first I had to check if the qemu MicroVM was fully functioning or not. First I…"/><meta data-react-helmet="true" property="og:title" content="Porting FreeBSD to qemu MicroVM"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:url" content="https://nobinpegasus.github.io/blog/porting-freebsd-to-qemu-microvm/"/><meta data-react-helmet="true" property="og:site_name" content="NobinPegasus"/><meta data-react-helmet="true" property="og:locale" content="en_CA"/><meta data-react-helmet="true" name="image" content="https://nobinpegasus.github.io/assets/bg/bg.jpg"/><meta data-react-helmet="true" name="description" content="Recently I got started with FreeBSD kernel and came across this interesting article from  Tim Jones . It mainly focuses on the author&#x27;s effort to port the FreeBSD kernel to qemu microVM. I&#x27;m step by step reproducing it. To reproduce it first I had to check if the qemu MicroVM was fully functioning or not. First I…"/><meta name="generator" content="Gatsby 4.10.1"/><style data-href="/styles.a6c0a2bdb387d29c8a6b.css" data-identity="gatsby-global-css">.iframe-container{height:0;padding-bottom:56.25%;position:relative;width:100%}.iframe-container iframe{height:100%;left:0;position:absolute;top:0;width:100%}a>code[class*=language-],a>pre[class*=language-]{color:#398ccc;text-shadow:none}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#404040;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:.8rem;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}@media (max-width:1200px){code[class*=language-],pre[class*=language-]{font-size:.6rem}}pre[class*=language-]{border:1px solid #ccc;border-radius:.2em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#eee;margin-bottom:1.66rem}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#404040}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#fa6900}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#398ccc}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#456ccc}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#398ccc}.token.important,.token.keyword,.token.regex{color:#fa6900}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><link rel="preconnect" href="https://instagram.com"/><title data-react-helmet="true">Porting FreeBSD to qemu MicroVM | NobinPegasus</title><link data-react-helmet="true" rel="alternate" type="application/rss+xml" title="NobinPegasus – Low Level Systems Enthusiast" href="https://nobinpegasus.github.io//feed.xml"/><script data-react-helmet="true" type="application/ld+json">[{"url":"https://nobinpegasus.github.io/blog/porting-freebsd-to-qemu-microvm/","@context":"http://schema.org","@type":"BlogPosting","@id":"https://nobinpegasus.github.io/blog/porting-freebsd-to-qemu-microvm/","name":"Porting FreeBSD to qemu MicroVM","alternateName":"NobinPegasus – Low Level Systems Enthusiast","headline":"Porting FreeBSD to qemu MicroVM","image":{"@type":"ImageObject","url":"https://nobinpegasus.github.io/assets/bg/bg.jpg"},"description":"Low Level Systems Enthusiast","datePublished":"April 10, 2025","dateModified":"April 10, 2025","author":{"@type":"Person","name":"Zeshan Ahmed Nobin","url":"https://nobinpegasus.github.io","image":"https://static.ashfurrow.com/ashfurrow_thumbsup_square.jpeg","sameAs":["https://twitter.com/zeshan_nobin","https://linkedin.com/in/zeshanahmednobin","https://github.com/nobinpegasus"]},"publisher":{"@type":"Organization","name":"Zeshan Ahmed Nobin","logo":{"@type":"ImageObject","url":"https://nobinpegasus.github.io/assets/home.png"}},"isPartOf":"https://nobinpegasus.github.io/","mainEntityOfPage":{"@type":"WebSite","@id":"https://nobinpegasus.github.io/"}}]</script><style data-styled="" data-styled-version="5.3.3">.Zxpuq{display:block;clear:both;position:relative;background:linear-gradient( rgba(0,0,0,0.2),rgba(0,0,0,0.2) ),url(/assets/bg/bg3.jpg) no-repeat black;background-size:cover;text-align:left;z-index:5;padding-top:4rem;padding-bottom:4rem;}/*!sc*/
@media (max-width:1200px){.Zxpuq{padding-top:3rem;padding-bottom:3rem;}}/*!sc*/
@media (max-width:600px){.Zxpuq{padding-top:3rem;padding-bottom:3rem;}}/*!sc*/
data-styled.g2[id="Header__HeaderWrapper-sc-1r9rxxa-0"]{content:"Zxpuq,"}/*!sc*/
.krJxRM{margin:0 auto;width:66.6%;}/*!sc*/
@media (max-width:1200px){.krJxRM{width:83.3%;}}/*!sc*/
@media (max-width:600px){.krJxRM{width:initial;}}/*!sc*/
data-styled.g3[id="Header__ContentWrapper-sc-1r9rxxa-1"]{content:"krJxRM,"}/*!sc*/
.bEYFDC{position:relative;margin:3rem 4rem;}/*!sc*/
.bEYFDC a{color:white;}/*!sc*/
.bEYFDC a:hover{opacity:0.85;color:white;}/*!sc*/
@media (max-width:1200px){.bEYFDC{margin:2rem 2rem;}}/*!sc*/
@media (max-width:600px){.bEYFDC{margin:0rem 1rem;}}/*!sc*/
data-styled.g4[id="Header__Content-sc-1r9rxxa-2"]{content:"bEYFDC,"}/*!sc*/
.jmpMuY{margin-bottom:0;}/*!sc*/
data-styled.g6[id="PrevNext__HR-sc-u8r4f3-0"]{content:"jmpMuY,"}/*!sc*/
.gmmUsR{margin:2rem auto 0;overflow:auto;}/*!sc*/
@media (max-width:1200px){.gmmUsR{margin:0.5rem auto 1rem;}}/*!sc*/
@media (max-width:600px){.gmmUsR{margin:0.5rem auto 0;}}/*!sc*/
data-styled.g7[id="PrevNext__Wrapper-sc-u8r4f3-1"]{content:"gmmUsR,"}/*!sc*/
.hxYoAa{border:1px rgba(64,64,64) solid;width:45%;padding:0.5rem 1rem;font-family:Futura;text-align:center;color:rgba(64,64,64);}/*!sc*/
@media (max-width:1200px){.hxYoAa{width:100%;margin:0.5rem auto;}}/*!sc*/
@media (max-width:600px){.hxYoAa{width:100%;margin:0.25rem auto;}}/*!sc*/
.hxYoAa:hover,.hxYoAa:focus{color:#fff;border-color:#398CCC;background-color:#398CCC;}/*!sc*/
data-styled.g8[id="PrevNext__Button-sc-u8r4f3-2"]{content:"hxYoAa,"}/*!sc*/
.cqUArt{float:left;}/*!sc*/
data-styled.g9[id="PrevNext__Prev-sc-u8r4f3-3"]{content:"cqUArt,"}/*!sc*/
.bmMFRk{text-align:center;float:right;}/*!sc*/
data-styled.g10[id="PrevNext__Next-sc-u8r4f3-4"]{content:"bmMFRk,"}/*!sc*/
.detfcx{text-transform:uppercase;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.75rem;}/*!sc*/
data-styled.g11[id="PrevNext__LinkText-sc-u8r4f3-5"]{content:"detfcx,"}/*!sc*/
.kKxVbs{font-family:Futura;font-weight:bold;text-transform:normal;text-align:left;color:#fff;position:relative;padding:0;overflow-wrap:normal;margin:4rem auto;font-size:3rem;line-height:3rem;}/*!sc*/
@media (max-width:1200px){.kKxVbs{margin:1rem auto;font-size:2rem;line-height:2.5rem;}}/*!sc*/
@media (max-width:600px){.kKxVbs{margin:0 auto;font-size:1.5rem;line-height:2rem;}}/*!sc*/
data-styled.g12[id="SectionTitle-sc-1uu7sja-0"]{content:"kKxVbs,"}/*!sc*/
.kgKOSw{margin:auto;font-size:1.5rem;line-height:1.5rem;font-weight:initial;}/*!sc*/
data-styled.g13[id="SectionTitle__SectionSubTitle-sc-1uu7sja-1"]{content:"kgKOSw,"}/*!sc*/
.wAfqD{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 auto;width:66.6%;padding:0;}/*!sc*/
@media (max-width:1200px){.wAfqD{width:83.3%;}}/*!sc*/
@media (max-width:600px){.wAfqD{width:initial;margin:0 0.5rem;}}/*!sc*/
data-styled.g16[id="Wrapper-sc-1borxvi-0"]{content:"wAfqD,"}/*!sc*/
.gbUEta{position:relative;cursor:pointer;display:block;color:#fff;}/*!sc*/
data-styled.g26[id="MenuButton__Wrapper-sc-v7yf7j-0"]{content:"gbUEta,"}/*!sc*/
.kBsJfc{margin:0.1rem 0 auto 0;height:75%;}/*!sc*/
data-styled.g30[id="NavBar__Image-sc-szt7zh-0"]{content:"kBsJfc,"}/*!sc*/
.lkZnlG{position:fixed;width:100%;top:0;left:0;background:clear;z-index:1000;font-size:0.75rem;padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);}/*!sc*/
@media (max-width:1200px){.lkZnlG{box-shadow:none;border-bottom:none;}}/*!sc*/
@media (max-width:600px){}/*!sc*/
data-styled.g31[id="NavBar__Bar-sc-szt7zh-1"]{content:"lkZnlG,"}/*!sc*/
.fnbPoY{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:auto;padding:0 0.5rem;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
data-styled.g32[id="NavBar__FlexContainer-sc-szt7zh-2"]{content:"fnbPoY,"}/*!sc*/
.jTeRro{justify-self:stretch;vertical-align:center;vertical-align:middle;list-style-type:none;margin:auto 0 auto auto;}/*!sc*/
.jTeRro li{display:inline-block;padding:0;margin:auto 0;line-height:1.5rem;}/*!sc*/
@media (max-width:600px){.jTeRro li{display:none;}}/*!sc*/
.jTeRro a{display:inline-block;color:#fff;text-transform:uppercase;font-weight:bold;-webkit-text-decoration:none;text-decoration:none;font-family:Futura;padding:0.5rem;}/*!sc*/
.jTeRro a:hover{color:#398CCC;}/*!sc*/
data-styled.g33[id="NavBar__NavLinks-sc-szt7zh-3"]{content:"jTeRro,"}/*!sc*/
.bpYEEl{display:none;}/*!sc*/
@media (max-width:600px){.bpYEEl{display:initial;margin:auto 0;}}/*!sc*/
data-styled.g34[id="NavBar__BurgerWrapper-sc-szt7zh-4"]{content:"bpYEEl,"}/*!sc*/
.eYbBIX{margin:2rem 4rem;}/*!sc*/
.eYbBIX form p label,.eYbBIX form p input{display:block;}/*!sc*/
.eYbBIX form p input{min-width:275px;}/*!sc*/
.eYbBIX form p textarea{resize:vertical;min-height:150px;width:100%;}/*!sc*/
@media (max-width:1200px){.eYbBIX{padding:0rem;margin:2rem 2rem;}}/*!sc*/
@media (max-width:600px){.eYbBIX{padding:1rem 0.5rem;margin:0rem 0;}}/*!sc*/
data-styled.g35[id="Content-sc-m2md0-0"]{content:"eYbBIX,"}/*!sc*/
::selection{color:#fff;background:#398CCC;}/*!sc*/
body{background:#fff;color:rgba(64,64,64);font-variant-ligatures:common-ligatures;}/*!sc*/
@media (max-width:600px){body{font-size:14px;}}/*!sc*/
body pre{font-variant-ligatures:no-common-ligatures;font-feature-settings:normal;}/*!sc*/
a{color:#398CCC;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:all none;transition:all none;}/*!sc*/
h1,h2,h3,h4{color:rgba(64,64,64);}/*!sc*/
h1 a,h2 a,h3 a,h4 a{color:rgba(0,0,0,0.9);}/*!sc*/
h1{font-family:Futura;}/*!sc*/
h2,h3,h4{font-family:ff-tisa-web-pro;}/*!sc*/
h3{margin-bottom:0.83rem;}/*!sc*/
blockquote{font-style:italic;position:relative;}/*!sc*/
img{display:block;margin-left:auto;margin-right:auto;}/*!sc*/
.navbar a svg{height:0.75rem;}/*!sc*/
.timeline .event.year:not(:first-child) .date-col{margin-bottom:2rem;margin-top:1rem;}/*!sc*/
.timeline .event.year .date-col{margin-bottom:2rem;}/*!sc*/
.timeline .event.year .date-col time{padding-left:1rem;padding-right:1rem;padding-top:0;padding-bottom:8px;}/*!sc*/
.timeline .event.year .card-col time{padding-left:1rem;padding-right:1rem;padding-top:0;padding-bottom:8px;}/*!sc*/
.timeline .event.year .card-col .card{background:transparent;border:none;box-shadow:none;}/*!sc*/
.timeline .card{margin-bottom:1rem;border:1px solid #bbb;box-shadow:0px 1px 3px 0px rgba(0,0,0,0.2);}/*!sc*/
.timeline .card a{color:#398CCC;}/*!sc*/
.timeline .card h3 a{margin-left:0.3rem;color:rgba(189,189,189,0.5);font-weight:normal;}/*!sc*/
.timeline .card h3 a:hover{color:#398CCC;}/*!sc*/
.timeline h3,.timeline p{margin-bottom:0.75rem;}/*!sc*/
.timeline h3:last-child,.timeline p:last-child{margin-bottom:0;}/*!sc*/
@media (min-width:768px){.timeline .event .card-col img.eventImage{display:none;}.timeline .event:nth-child(2n) .date-col img{margin-left:0;}.timeline .event:nth-child(2n+1) .date-col img{margin-right:0;}}/*!sc*/
.twitter-tweet{margin-left:auto;margin-right:auto;}/*!sc*/
blockquote:before{content:"";position:absolute;background:#398CCC;height:100%;width:6px;margin-left:-1.6rem;}/*!sc*/
label{margin-bottom:.5rem;color:rgba(0,0,0,0.9);}/*!sc*/
input,textarea{border-radius:.5rem;border:none;background:rgba(0,0,0,0.05);padding:.25rem 1rem;}/*!sc*/
input:focus,textarea:focus{outline:none;}/*!sc*/
.textRight{text-align:right;}/*!sc*/
hr{background:#eee;clear:both;}/*!sc*/
iframe{display:block;margin:0 auto;}/*!sc*/
footer svg{height:3rem;}/*!sc*/
data-styled.g36[id="sc-global-jBDJLu1"]{content:"sc-global-jBDJLu1,"}/*!sc*/
.iyHvuo{margin-top:1rem;}/*!sc*/
data-styled.g41[id="Post__PostContent-sc-1ngvggf-0"]{content:"iyHvuo,"}/*!sc*/
.dxuVPj{color:rgba(64,64,64);margin:0.5rem auto;display:block;font-size:0.75rem;font-style:italic;}/*!sc*/
.dxuVPj:hover{color:#398CCC;-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g42[id="Post__TypoLink-sc-1ngvggf-1"]{content:"dxuVPj,"}/*!sc*/
.ifsDRD{color:white;width:5rem;margin:0.5rem 0;height:3px;}/*!sc*/
data-styled.g43[id="Post__Line-sc-1ngvggf-2"]{content:"ifsDRD,"}/*!sc*/
.vjrZu{color:white;clear:both;font-family:Futura;}/*!sc*/
data-styled.g44[id="Post__Date-sc-1ngvggf-3"]{content:"vjrZu,"}/*!sc*/
</style><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-E8N92RDJQ3"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-E8N92RDJQ3', {"send_page_view":false});
      }
      </script><link rel="alternate" type="application/rss+xml" title="Zeshan Ahmed Nobin&#x27;s Blog" href="/feed.xml"/><link rel="alternate" type="application/rss+xml" title="Zeshan Ahmed Nobin&#x27;s Blog" href="/feed.rss.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl+'';f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer', 'undefined');</script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link href="//fonts.googleapis.com/css?family=Futura:700|ff-tisa-web-pro:400" rel="stylesheet" type="text/css"/><link rel="icon" href="/favicon-32x32.png?v=92efb82ede4334da9b36397137cde393" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=92efb82ede4334da9b36397137cde393"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=92efb82ede4334da9b36397137cde393"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=92efb82ede4334da9b36397137cde393"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=92efb82ede4334da9b36397137cde393"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=92efb82ede4334da9b36397137cde393"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=92efb82ede4334da9b36397137cde393"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=92efb82ede4334da9b36397137cde393"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=92efb82ede4334da9b36397137cde393"/><link as="script" rel="preload" href="/webpack-runtime-c3c7eb42000e94358da0.js"/><link as="script" rel="preload" href="/framework-e65ce11b871bf77a3d80.js"/><link as="script" rel="preload" href="/app-6a81fc7d44acbeb8c5bd.js"/><link as="script" rel="preload" href="/cb1608f2-218510d208b0de97d0f0.js"/><link as="script" rel="preload" href="/c9c439c49dc09dc0360bec9f4e6fbc664e7660ed-16fb8a5403b26463b9b8.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-2f23a8b299a022cf6599.js"/><link as="fetch" rel="preload" href="/page-data/blog/porting-freebsd-to-qemu-microvm/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=undefined" height="0" width="0" style="display: none; visibility: hidden" aria-hidden="true"></iframe></noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><nav class="NavBar__Bar-sc-szt7zh-1 lkZnlG"><div class="NavBar__FlexContainer-sc-szt7zh-2 fnbPoY"><a style="height:4.2rem;padding:1.0rem;margin:0.5rem 0" href="/"><img src="/assets/home-white.png" class="NavBar__Image-sc-szt7zh-0 kBsJfc"/></a><ul class="NavBar__NavLinks-sc-szt7zh-3 jTeRro navbar"><li><a href="/blog">Blog</a></li><li><a href="/about">About</a></li><li><a href="/publications">Publications</a></li><li><a href="/contact">Contact</a></li><li><a href="/credits">Credits</a></li><li><a href="/search"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="magnifying-glass" class="svg-inline--fa fa-magnifying-glass fa-fw " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"></path></svg></a></li><li><a href="/feed.xml"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="square-rss" class="svg-inline--fa fa-square-rss fa-fw " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M384 32H64C28.65 32 0 60.66 0 96v320c0 35.34 28.65 64 64 64h320c35.35 0 64-28.66 64-64V96C448 60.66 419.3 32 384 32zM150.6 374.6C144.4 380.9 136.2 384 128 384s-16.38-3.121-22.63-9.371c-12.5-12.5-12.5-32.76 0-45.26C111.6 323.1 119.8 320 128 320s16.38 3.121 22.63 9.371C163.1 341.9 163.1 362.1 150.6 374.6zM249.6 383.9C249 383.1 248.5 384 247.1 384c-12.53 0-23.09-9.75-23.92-22.44C220.5 306.9 173.1 259.5 118.4 255.9c-13.22-.8438-23.25-12.28-22.39-25.5c.8594-13.25 12.41-22.81 25.52-22.38c77.86 5.062 145.3 72.5 150.4 150.4C272.8 371.7 262.8 383.1 249.6 383.9zM345 383.1C344.7 384 344.3 384 343.1 384c-12.8 0-23.42-10.09-23.97-23C315.6 254.6 225.4 164.4 119 159.1C105.8 159.4 95.47 148.3 96.02 135C96.58 121.8 107.9 111.2 121 112c130.7 5.469 241.5 116.3 246.1 246.1C368.5 372.3 358.3 383.4 345 383.1z"></path></svg></a></li></ul><div class="NavBar__BurgerWrapper-sc-szt7zh-4 bpYEEl"><div class="MenuButton__Wrapper-sc-v7yf7j-0 gbUEta"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" class="svg-inline--fa fa-bars " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"></path></svg></div></div></div></nav><header class="Header__HeaderWrapper-sc-1r9rxxa-0 Zxpuq"><div class="Header__ContentWrapper-sc-1r9rxxa-1 krJxRM"><div class="Header__Content-sc-1r9rxxa-2 bEYFDC"><div class="SectionTitle-sc-1uu7sja-0 kKxVbs">Porting FreeBSD to qemu MicroVM<hr class="Post__Line-sc-1ngvggf-2 ifsDRD"/><div class="SectionTitle-sc-1uu7sja-0 SectionTitle__SectionSubTitle-sc-1uu7sja-1 kKxVbs kgKOSw"><time dateTime="2025-04-10" class="Post__Date-sc-1ngvggf-3 vjrZu">April 10, 2025</time></div></div></div></div></header><div class="Wrapper-sc-1borxvi-0 wAfqD"><div class="Content-sc-m2md0-0 eYbBIX"><div class="Post__PostContent-sc-1ngvggf-0 iyHvuo"><p>Recently I got started with FreeBSD kernel and came across this interesting article from <a href="https://adventurist.me/posts/00320" target="_blank" rel="nofollow noopener noreferrer">Tim Jones</a>. It mainly focuses on the author’s effort to port the FreeBSD kernel to qemu microVM.</p><p>I’m step by step reproducing it. To reproduce it first I had to check if the qemu MicroVM was fully functioning or not.</p><p>First I cloned the linux kernel and compiled it, and got <code class="language-text">vmlinux</code>. The qemu microVM needs uncompressed kernel image to run. Otherwise we could have used bzImage also. Then we created a basic ext4 filesystem.</p><p>Steps to create a vmlinux kernel image:</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">git clone https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git 
cd linux
git checkout v6.14
make defconfig
make menuconfig</code></pre></div><p>If you are new to menuconfig, use <code class="language-text">/[keyword]</code>, to search a where a specific config lies. Press <code class="language-text">Enter to enter into a nested setting. Then press </code>space/y` to enable that configuration. I forgot the exact key. Once a config is enabled you will see <!-- -->[*]<!-- --> around it’s name. Then save the config. Be very careful about saving the config after enabling it. </p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:821px">
      <a class="gatsby-resp-image-link" href="/static/f5d5a5e975bd9eaadec0c7bc955069b5/02cd5/3.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:71.00000000000001%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADH0lEQVQ4y22RbU9bZRjH+yl8beJDYkzUdw7KYnzjRzAmxgQZm0uQsiwmLpiYdWxiFjOdA2ILlKIMqi1bgbbn+bSnz5yHtpxSKKUw/CQ/c07L4qIv/rn/95Xr/uV/X1eg1z/n9PyCk/4Lep7OXgz82QWHxyfYTRen1cbtdGm1j2gfndDrX/i93dNzv37U7XPcO8NpugQ+uR1nJBRndCpGMBQneGud4HScMc/PxLkytcpoaI3RmTVGvo4xcmOF4M0YI1+tcOX6Mh9eXyZ4c5X3x6PcWcgR+HR2neWkxMJmzteTp1nmV3a4+9tz7kfTPIxnmYumebCy69/DkTTfL6Z4vJElkpRZ3BT891P31/hiNkbg259TuFYRVchgVQ2smoGhSWhSjoIqUTU0DFWkXspTUAWKuky9nKeUl/1+s1Kg27aJRSNMzswRuPXwL8qGjipLlAydgq6gKSLFgoqRV8lk9pAkEVkSyWYyKLKEqshIooiqKmiqQqNhsbQU5ZoHDP2YoGlVeRzfZfbRFnNLzwgvpPjulyTzkTSmWcO26pj7taGq7NcrWMN7vVahc9giGllhIuQDtzhw6kiaweYzgcRzgdSOwPaezJ6oU6uWscwazYZFq2lz0HJekVc/7XVYjq4yEbo3TGjXcOw6uq6hSgK6IlHQZP/LQjaDmMsiiwKlYgHLrOPYpg/y5Dgmve4hUR84TNjygI5NTlIRBYHM3h6ikEPXVKqVop/QrFdpNuyXST15vuEBT14BDhLu12tkBNkfvJjLIQk5yiWDSrnoQ725XX7fg1wm/A9wen4Lx6xQrpUoGHkqxTx5XfW35yXUNQVFFikaeR/sLalhmy+hjr1P97hN5HIpt39Kcn56SNk22ZZKqGWL46M27kGTzqE78K0GnU7b9223SafjctRxOWg1cN0Wf1/0icXWB8DJ8AZKNs0fv2/wzd0n/PBomd1UgsT6GqnEU3ZSCTbXVgc+OfDbf26STibYGNaV3C4PwveYmA4TeO/zX3l97AZvjY3z7seTvPPRBG8Ex3lzzDu/HPir//L/U3/76gSvffAZ1+4s8g9w7Uak90YnFQAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="3" title="3" src="/static/f5d5a5e975bd9eaadec0c7bc955069b5/02cd5/3.png" srcSet="/static/f5d5a5e975bd9eaadec0c7bc955069b5/5a46d/3.png 300w,/static/f5d5a5e975bd9eaadec0c7bc955069b5/0a47e/3.png 600w,/static/f5d5a5e975bd9eaadec0c7bc955069b5/02cd5/3.png 821w" sizes="(max-width: 821px) 100vw, 821px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:821px">
      <a class="gatsby-resp-image-link" href="/static/04c5153278c90530e7946a8d7558893e/02cd5/4.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:71.00000000000001%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAClklEQVQ4y53M20uTcRzH8aeLiKwlBAWFEB0kiLLoptJ13HRWpCVahIUyowRrS4PqKjQ13JyKOkXN44WU1k1hWXloBzd123PYPG0e+0/e4TPFNK+8ePH9fp7v5/kJs/OLRBb+EJ5bjJpfUmdkfonQVBi/HCKgTBCcDCOHpglNRdRbZG6JmdkFgpMzTIXn1F1UQgiGF10kmTvRFrSjNXdysbALrakDrakTrbmDxKdtJJraSVL3di48fk9ifhuJT1pVy1mb38aZ3CZe1/chxN2uYmeyBY3Bwu6UTRisa1Ksm3ZiU60I2jKy33xAOJxRQ8zVCjR6CxrdCr2F2GQLe5Kjcz3rWle/0k2xsi2pjNySHoSE7HpOZdtJeNCgOv2wQc3xWbUcv1fHsaxa4rPqiL8bdTSzlpPZdrW3+s/ZnEbi0mvIffsJwWzpwTfuweV243A4cDgdOF1u+n4M0dc/QN/PYb58H+D7r2G+/Rzma/8gDpdL7brdbgYHhxAD4zS2dmN8WY9QZPuE5PPg9biRJR9SYBxZ9BGU/cjiuDoVKZpXKf/0RP8YM1NB7HUN5JlKEAorexF9HpyO34x6R9SHV23Mm/GMuJAlPw32JvLMZQjPrb2EpxUkWUSWA8iyiKLuIgHRjyhGv6k3af19mST6mY1M09LSjtFUilBU2Ut4wofk96KIoyiBUSbkMTyeEV7Zuilv/IwsjiF6nTgH+tVecLm3QvZ7mZ1RaG1uJu9ZCcK5XDu6jAJ0t4zo0h6tc21D1qc/+q+jS8vDkPGEhKRMjEU2hEN3qtlxqZRdV8qI2SLNtXKE88XkFPcgHMmoIdZQyd7rNvambs2+G1Vsv/wu+uCJ+3Xsv2njYFoVB25tTVx6NRp9BcaSj/wFBH7GK0hWnnAAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="4" title="4" src="/static/04c5153278c90530e7946a8d7558893e/02cd5/4.png" srcSet="/static/04c5153278c90530e7946a8d7558893e/5a46d/4.png 300w,/static/04c5153278c90530e7946a8d7558893e/0a47e/4.png 600w,/static/04c5153278c90530e7946a8d7558893e/02cd5/4.png 821w" sizes="(max-width: 821px) 100vw, 821px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:821px">
      <a class="gatsby-resp-image-link" href="/static/6706ace0219a38c2191164eafb52b869/02cd5/5.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:71.00000000000001%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC40lEQVQ4y2WSS29TRxiG/Su6RiBBFxXqDrBpK7HpP6iqCgkaA120iUlQJURXCYhr2gWFFCe2YldIxU5cHCc+iWP7HF+OL+fY5+LbsZ2ktN3wNx50xpcUung0883M9877fTOeg6M3DI/+ZnD4Zsxo7q51nAENs41hd2h1+1hth44zZHj0j9jvH/wl1nuDIzE3rDaeL29F8c5H8f2wju9mlIsLv+MNRPAFInjn1rkwG8YbWMe3EOXC92HOXV/j/I3QFDf2fhfi7JUgt59JeL66E2U1keF5bHdKMJFlLZljJbbPg0iah5E0d8Pb/PrHHsH4Pi9iGV7ER/wWyxDdkpm9H+XynTCeH3+OoxX30dQCFSWLpat0LR2n1aBn6/TsBoeOzbBrceBYHH7AsGvy9t8hLyPr+OeW8Nx8EkctyaRSKXK5LOmdHYEkSWJtb3cXRc6jlksYRuN/NBsag36XYDDEzNxdPAvLm9jNGlI6TbEgU6uqVNSSQC0VqVXK6FqNlm1Msa0mltkQo2noHAy7rK6GR4Lzj+P0uyZavYoi54RoQckLV26cy2ZEXFVLlEsFatUyWr0ixGyrMRbsjQWX8AQevUKrFoUjNzG9s02xoIjkyQVyPoucz1FQZBG7Zy1z5NJoagwHrsNxyfNP4rRNjex+RhxWywWqlTKlojLFFXBdVcpF0Uu3Le6Fk0td4ZWVIP7AWLBl1EWf3CRdq9LU69jWcc8mbkZlvs+k5LXjkmPkMxK5bJY9SRIuSwVZuHSd6PUKHVun02piGLoQ+C+jV+4cv/Kt5Q36PQvDbNJuWcKZOf4SrgO5qBLbVlCqDZHY67VxJjgdWi0bq+OwForgdwWvL74ks5NkKxEjlYiT+tNlQ4zS1iahcJS5n35h+WmYdHKD5GaMrUR8yuuNV+xuJ7m3uIR/dhHP2W+ecuLiDU55r3DKd/U9Tnqvcvqzb/nk0jU+/mKGkx/sTzjz+Qwfffo1/tvPeQfCyVEdGOxUfgAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="5" title="5" src="/static/6706ace0219a38c2191164eafb52b869/02cd5/5.png" srcSet="/static/6706ace0219a38c2191164eafb52b869/5a46d/5.png 300w,/static/6706ace0219a38c2191164eafb52b869/0a47e/5.png 600w,/static/6706ace0219a38c2191164eafb52b869/02cd5/5.png 821w" sizes="(max-width: 821px) 100vw, 821px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:821px">
      <a class="gatsby-resp-image-link" href="/static/9dc04dd1f7a8213883e948ebdbc45d48/02cd5/6.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:71.00000000000001%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADOUlEQVQ4y02RW28iZRjH+RReG9u4N0a9cyvUC2/8BsaYGFf20E1MD7oXbtYbe0rdjYmmCz1QCvSwFijdHqQdGGCAAYbDHBgYaCntbvWT/Axv67oX//z/ed5nfu/zvOPqX76mf3lF7+L1ja7z+cUV7W4P3WpjNB1anTOarS5O95zzyytxftZ/Jerd3gVn568w7TauLx5t8OnUBu7xMJ6pDTw/bgp3DzQZYWQ8hHsqgueHCO7JMLfHgoyMrTMyFuT2gzU+ub+G++E6H90J8Nh3guvLJxsEX8r4Y5KQL3oitJJI8yx8xEI4yVzoiPnQEdPBQ/yxFItbf+HfkViJp4Wv7ab5fi7MN09CuH76PUG7oZKVkhhaEaNapKSkKWYk1FyaSiFLIZOiqirkZYlyXqZRKQjXtaLIPccgFFjl3uQsrqlnccpFBUlOkVNyZDIyKUkim82Qy2U5OT5GltNCx8mk8EFPOpW67slmsCydpaUAdwfAyadRzHoZVVMpllUyskxeyQopNx+oxTzFgkKtWkFv1KjXKuj1Ko16VdS6HZvAahDvxCyuiV+jNHWNmlamUKqQlmWUXJbszRSplES5pFKraQLUqGvYTYOWbQo1LZ2Lfpe1wDreiZlroKVrWHoFU6+hZAfvlqGUlykXMtiGJjawGmVKal5Ma5kNARrINBv0ex0CAjiLa3xhh7ZVY3s/wy++PeZ8UeZ8MWaex5h9vsPC8i7z/hhPV+IkjyUK+ayAapWSkACed/8HDia0jSoHkoJvM4k/nMAX3sMfecny5j4rWwesbO2zFEmg5As3axpi7YEsAey8DdzBqJdpGlVsq4FayFEtKTSqRTRVoWXW6LR0cd5q6pw6Jm1bf7O2adTpnTms/vdTHv22y2W/g+O0xM3tts1p18FumrSd1pt8eupQqRvET0qoVYPeqYNtW6L/n78vCYU2roH3p7dJJffZj++wvb5GdHuTw0SM6GaYRPQFh4koL0JBDuJ/srQaYfznP1hcDpPci7IdWhc9mZMj5qdn8I5P4/rw60Xe9TxgyP0tw6Nehj3fMeS+w7DHy5D7Jo9e51ufefng83vC33ur/v6ol3c+/oq7j/38C3O9RBJx+0SlAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="6" title="6" src="/static/9dc04dd1f7a8213883e948ebdbc45d48/02cd5/6.png" srcSet="/static/9dc04dd1f7a8213883e948ebdbc45d48/5a46d/6.png 300w,/static/9dc04dd1f7a8213883e948ebdbc45d48/0a47e/6.png 600w,/static/9dc04dd1f7a8213883e948ebdbc45d48/02cd5/6.png 821w" sizes="(max-width: 821px) 100vw, 821px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>For our tesk turn this configs on:</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Device Drivers → Character devices → Serial drivers → 8250/16550 (CONFIG_SERIAL_8250=y)

And Console on 8250/16550 (CONFIG_SERIAL_8250_CONSOLE=y)

Virtualization → KVM guest support (CONFIG_KVM_GUEST=y)

Device Drivers → Virtio drivers:

CONFIG_VIRTIO_BLK=y

CONFIG_VIRTIO_NET=y (if you eventually want networking)

CONFIG_VIRTIO_CONSOLE=y (if you switch from ttyS0 to virtio console)

CONFIG_EXT4_FS=y (for ext4 rootfs)

Processor type and features  ---&gt;
  [*] EFI stub support
  [*] Support for loading uncompressed kernel as a PVH guest
</code></pre></div><h3 id="compile-uncompressed-kernel" style="position:relative"><a href="#compile-uncompressed-kernel" aria-label="compile uncompressed kernel permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Compile uncompressed kernel:</h3><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">make -j$(nproc) vmlinux</code></pre></div><p>Steps to create busy-box based rootfs</p><h3 id="1-get-busybox-binary" style="position:relative"><a href="#1-get-busybox-binary" aria-label="1 get busybox binary permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Get BusyBox Binary:</h3><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">mkdir -p ~/rootfs/{bin,dev,proc,sys}
cd ~/rootfs

# Download the static 64-bit binary
wget https://busybox.net/downloads/binaries/1.35.0-x86_64-linux-musl/busybox

# Make it executable
chmod +x busybox

ln -s busybox bin/sh
ln -s busybox bin/ls
ln -s busybox bin/mount
ln -s busybox bin/cat
ln -s busybox bin/echo</code></pre></div><h3 id="1install-busybox-in-a-custom-root-directory" style="position:relative"><a href="#1install-busybox-in-a-custom-root-directory" aria-label="1install busybox in a custom root directory permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.Install BusyBox in a custom root directory:</h3><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">cd ~/rootfs

# Copy in a static BusyBox binary (build or download one)
# Example: assume you have busybox in /usr/local/bin/busybox
cp /usr/local/bin/busybox ./busybox
chmod +x busybox

# Make standard directories
mkdir -p bin dev proc sys
ln -s busybox bin/sh
ln -s busybox bin/ls
ln -s busybox bin/mount
# ... link any other applets you need</code></pre></div><h3 id="2-create-an-init-script-so-busybox-has-a-basic-init" style="position:relative"><a href="#2-create-an-init-script-so-busybox-has-a-basic-init" aria-label="2 create an init script so busybox has a basic init permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Create an init script (so BusyBox has a basic init):</h3><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">cat &lt;&lt; &#x27;EOF&#x27; &gt; init
#!/bin/sh
mount -t proc none /proc
mount -t sysfs none /sys
echo &quot;Welcome to BusyBox on QEMU microvm!&quot;
exec /bin/sh
EOF

chmod +x init</code></pre></div><h3 id="3-create-an-ext4-disk-image" style="position:relative"><a href="#3-create-an-ext4-disk-image" aria-label="3 create an ext4 disk image permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Create an ext4 disk image</h3><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">cd ~
dd if=/dev/zero of=rootfs.ext4 bs=1M count=64
mkfs.ext4 rootfs.ext4

mkdir mnt
sudo mount rootfs.ext4 mnt
sudo cp -r rootfs/* mnt/
sudo umount mnt</code></pre></div><p>Booting into the linux kernel using qemu MicroVM.
<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1200px">
      <a class="gatsby-resp-image-link" href="/static/5826579cbf42aab6880c4a3c7003bf25/7e21b/1.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:18.333333333333336%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZUlEQVQY052NXQ6AIAyDd//r+YeCDAFvIasBJTEm+kCTL+u6ZKXRGijDUJqxsoOxDHvP1TLUotH1I4ZJYdamZFuICHGHv8ne+VCgQxKSCFISiFxkVV/3Z/YnQoOeZe9i+jq2kB+e+ug2rxoxPvgAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="1" title="1" src="/static/5826579cbf42aab6880c4a3c7003bf25/c1b63/1.png" srcSet="/static/5826579cbf42aab6880c4a3c7003bf25/5a46d/1.png 300w,/static/5826579cbf42aab6880c4a3c7003bf25/0a47e/1.png 600w,/static/5826579cbf42aab6880c4a3c7003bf25/c1b63/1.png 1200w,/static/5826579cbf42aab6880c4a3c7003bf25/7e21b/1.png 1626w" sizes="(max-width: 1200px) 100vw, 1200px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>Once this is done successfully you know that your qemu microVM is working fine.</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1200px">
      <a class="gatsby-resp-image-link" href="/static/a9580d2b7614e306f1a2dc8768ffa3c7/eee07/2.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:64.33333333333333%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABa0lEQVQ4y42TiXKEIBBE/f+PTEURERBF8Vx1OzXjkd3sFaq6EMt59BxGMlP4jgUSkSJOBOIkRSIkVK4hVY5MaX7/9R2DvjW2gCkcjL2XLRxybRB575GmEkopKJWzyrLE5XLBuq5Y1wXX65Wf/7Mi5xziOGGoSMmdgMpz1HXN0GmaWPM8cwDB3ymqqgpJItiZNgZaa4YSnM7WWnhfn44p6B04cmUJIQSyTLEzKkHlPZqmQd/36Loe4zgycFmWp5DjgjNlBirFjsqyQtd1CKFlIIE+rQPGwLKqILMMhXMwxrLDtm1xmeezhgQex62W5HbTdn7qkGp4NMXaYu+4gjGGgynVreOPegCSQ0qZXKZSQsqMpbVhKNWYOnwAlmV9GKG7lIuiYBDtBK9YW9q/6Y3n+AzDgGmv69Om0LzRWFBXaQ8hMGDYQbe3v3J1N9ieRyQwqAmBHZK7eW/Kq3n76/AEEoBSocLf6pOTV7/eDw+78CmVujplAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="2" title="2" src="/static/a9580d2b7614e306f1a2dc8768ffa3c7/c1b63/2.png" srcSet="/static/a9580d2b7614e306f1a2dc8768ffa3c7/5a46d/2.png 300w,/static/a9580d2b7614e306f1a2dc8768ffa3c7/0a47e/2.png 600w,/static/a9580d2b7614e306f1a2dc8768ffa3c7/c1b63/2.png 1200w,/static/a9580d2b7614e306f1a2dc8768ffa3c7/eee07/2.png 1628w" sizes="(max-width: 1200px) 100vw, 1200px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>Now that our qemu microVM is running, we got to compile the FreeBSD kernel and test it. Cross compiling on my host(ubuntu)  is a tedious job since the UNIX and FreeBSD are different. So I decided to switch to a freeBSD VM. I used virtualbox. You can get FreeBSD iso to boot from here:</p><p><code class="language-text">wget https://download.freebsd.org/ftp/releases/ISO-IMAGES/14.2/FreeBSD-14.2-RELEASE-amd64-disc1.iso</code> </p><p>Then use that to boot to FreeBSD like any other iso image is used in virtualbox. If still having difficulites you can follow <a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwicutOYiMyMAxVze2wGHTxJOVUQwqsBegQIFxAF&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DwGL3KiakMX8&amp;usg=AOvVaw3vaIn949VEED-KHl0J6UiM&amp;opi=89978449" target="_blank" rel="nofollow noopener noreferrer">this</a></p><p>Once you booted into freeBSD VM.
Use <code class="language-text">git clone https://git.freebsd.org/src.git freebsd-src</code> to get the kernel source. </p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1200px">
      <a class="gatsby-resp-image-link" href="/static/d1ba908e74720f65c5aff5dc6e94e2c0/c2d9c/7.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:79.33333333333333%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzUlEQVQ4y41UiW6rMBDk/z+xSjlsTtvckASSMNVsHjwahbZIqzU2O57ZA+8UK3zoCGGcQOkEkY4RRAqh0kiyHFlhUBgH40oY68TSLEcYafE8y43dzDvlCh+ZQmYNnHXI8hxJkiBOEtR1jaZpMI4jLpcLzucz5nnGT4/HwNwYJGmKoiiQZpkAFsbAOSd7XFtr0bTtBrgsy1vzlFLQOkYmQCnSNEMcx7JHgOv1+rRpwjRNuN1uPwOmaQprnTAoq0pk0tq2E4nvZDJw779J7roO/TCg63pM8yy2smLeyGp5YXQEJoBRFCGKFAhcliW01gjDEEEYIgwj1HWD5Q27w6Ksku/3O4ZhkAIYa6XalE6W1+sk54/H41dQj5VkIH1VVXBlKa3Sti2cK4U1L+TevsKHgMZYAWOw/efXC8iU66qqJad/ke1R2gZoHfq+F6ZkQ5lsE65p+4IcFcejJIJJ7oRt+WRnjBSKOaQR/BVgA90DBkEA3w8kRwxk4slqZXbUwK9MN0Df93E6fUpTc8zo2czMGXtwZch5Xmeanmf/QXeAn74PpbXkjvLZd2THD/t+eDb2sgjzvX1nuf85xAmGcZQX3s6JWR9WeJqO/y7vRu8Lv/DW46QIjBsAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="7" title="7" src="/static/d1ba908e74720f65c5aff5dc6e94e2c0/c1b63/7.png" srcSet="/static/d1ba908e74720f65c5aff5dc6e94e2c0/5a46d/7.png 300w,/static/d1ba908e74720f65c5aff5dc6e94e2c0/0a47e/7.png 600w,/static/d1ba908e74720f65c5aff5dc6e94e2c0/c1b63/7.png 1200w,/static/d1ba908e74720f65c5aff5dc6e94e2c0/c2d9c/7.png 1326w" sizes="(max-width: 1200px) 100vw, 1200px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span> </p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">cd freebsd-src
find /home/pegasus/freebsd-src -type f -exec touch {} \;

</code></pre></div><p>I was having some issues with access time and modification time, that’s why updated the file’s modification time and access time to the current time.
<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1200px">
      <a class="gatsby-resp-image-link" href="/static/924858da57e6c4bf552e26afc3d650c3/7e881/8.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:69%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaElEQVQ4y61SCW6EMAzM/x/ZqmqXIyEHgcByTjVeoPRYbSsVaWSTROMZ26rQBnmhv6PccPq/ZAWenl/wdsk+353eK/zzp/K8gNYaWZajLDWMMaishfMexlRyV2oNrY3kVWXRNA36vsf1ehUMw4B1XQUqhBp1Xd9InBMiHwLatkVdR4QQ4H0QkhijRN4xppSQUieE/ISQhyQcxxH9Vu0MnvPho29/o1hpr5q6TqxM03RgnmfM8yJxWZbD2lccCmmPfaMdRvbRWis5ybuu32Inas9qfhwKm0rb0uRh2BTNd60+sq/Yp5aEGzELSD/7XojvWbwHxSkSMTZii4S7EhL+eQ/ZK+6bcx5cIWudkLOnPDuUzqsMier3OI7TKR9laEobg9f8gkwXyHUpA6mqSnArEhDriBR7idwGFpGtSEmGxpxgYcXEOieXXJ99+3dlxDRPWLH+zjIVcLGpjPDeS9zP6xgxDB/r8mgo76GxQea4ZU+/AAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="8" title="8" src="/static/924858da57e6c4bf552e26afc3d650c3/c1b63/8.png" srcSet="/static/924858da57e6c4bf552e26afc3d650c3/5a46d/8.png 300w,/static/924858da57e6c4bf552e26afc3d650c3/0a47e/8.png 600w,/static/924858da57e6c4bf552e26afc3d650c3/c1b63/8.png 1200w,/static/924858da57e6c4bf552e26afc3d650c3/7e881/8.png 1521w" sizes="(max-width: 1200px) 100vw, 1200px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>python -m http.server</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">or</code></pre></div><p>python3 -m http.server</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">
Then a python server will already be running on the directory, you wrote the command from.
![](2.png)

Now let&#x27;s find the local ip address assinged to the same pc where the server was spawned.</code></pre></div><p>ipconfig</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">![](3.png) 

Put the IPv4 address on another PCs browser and also use the port. The default port for python http.server is `8000`.

![](4.png)

Now just like any FTP server just navigate and click on the file you want to download.

![](5.png)
### Using Network and Sharing
Do the following actions on both the PCs. Click on Network from file manager.

![](6.png)

Go to firewall &amp; network protection. On public network turn off the firewall. 

![](7.png)

Go to `control pannel -&gt; network and sharing center -&gt; change advanced sharing settings`. Turn everything `on` except `Password protected sharing`.

![](8.png)

Right click on the folder you want to share, press properties. Go to the sharing, press share.

![](new.png)

Add `everyone` and give them `read/write` permissions. 

![](10.png)

![](11.png)

![](12.png)

Go to Advanced sharing..., goto permissions, on everyone, tick allow on full control, change and apply it. 

![](13.png)

![](14.png)

![](15.png)

From that image we can see the root directory name. Here it’s \\PEGASUS
Put this name on the path field in the file manager.
After pressing enter we found the shared folders.

![](16.png)

![](17.png)

![](18.png)

Now select a specific folder that I want to share and right click on it. Click Map Network Drive…
Select a drive name. Tick connect using different credentials.

![](19.png)

Press finish and set username and password, which will be later used from another pc to connected to this PC over the network.
Now from the other PC. Go to Networks, then on file paths put `\\PEGASUS`
Press enter. `More choices -&gt; Use a different account`. Put the previously put username and password, press ok.

![](20.png)

![](21.png)

Voila! Now you are connected to your remote PC. Now you can see the shared folders from the different PC. Now you can copy the folder you want and paste it on your local directory.

![](22.png)

![](23.png)

### Using *robocopy* to copy folders/files
I created an empty folder where the files will be copied to. Turned sharing on in the previously mentioned way.

![](24.png)

![](25.png)

![](9.png)

Command:&lt;br/&gt;</code></pre></div><p>net use <!-- -->[mapped drive name][the shared folder path]<!-- --> /user:<!-- -->[username][password]</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Use the username and password you previously set.&lt;br/&gt;Example:</code></pre></div><p>net use K: <!-- -->\<!-- -->SANZU\New /user:test test</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">![](26.png)

Command:</code></pre></div><p>robocopy <!-- -->[source directory][target directory]<!-- --> <!-- -->[file to be copied][options]</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">
Example:</code></pre></div><p>robocopy D:\sanzu K:\ sanzu.rar /mt /z /j</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">![](27.png)

![](28.png)




export const _frontmatter = {&quot;title&quot;:&quot;Porting FreeBSD to qemu MicroVM&quot;,&quot;date&quot;:&quot;2025-04-10T00:00:00.000Z&quot;,&quot;banner&quot;:&quot;background.webp&quot;,&quot;bannerAttribution&quot;:null}</code></pre></div></div><hr style="margin:0"/><a class="Post__TypoLink-sc-1ngvggf-1 dxuVPj">Please submit corrections on email by pressing here. Or</a><a class="Post__TypoLink-sc-1ngvggf-1 dxuVPj">Email me at zeshanahmednobin@gmail.com using Subject: Blog(Suggestion/Corrections)</a><hr class="PrevNext__HR-sc-u8r4f3-0 jmpMuY"/><div class="PrevNext__Wrapper-sc-u8r4f3-1 gmmUsR"><a href="/blog/sharing-folder-files-over-lan-on-windows/"><div class="PrevNext__Button-sc-u8r4f3-2 PrevNext__Prev-sc-u8r4f3-3 hxYoAa cqUArt"><div class="PrevNext__LinkText-sc-u8r4f3-5 detfcx">Sharing folder/files over LAN on windows</div></div></a><a href="/blog/publications/"><div class="PrevNext__Button-sc-u8r4f3-2 PrevNext__Next-sc-u8r4f3-4 hxYoAa bmMFRk"><div class="PrevNext__LinkText-sc-u8r4f3-5 detfcx">Publications</div></div></a></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
        window.gatsbyLoadInstagram = function() {
          var js = document.createElement('script');
          var firstScript = document.getElementsByTagName('script')[0];
          js.id = 'gatsby-plugin-instagram';
          js.src = 'https://instagram.com/embed.js';

          firstScript.parentNode.insertBefore(js, firstScript);

          return true;
        }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/porting-freebsd-to-qemu-microvm/";window.___webpackCompilationHash="f312c29ff30a46b78c91";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-f537c04a234ec55d7728.js"],"app":["/app-6a81fc7d44acbeb8c5bd.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-819fe14f87f7d11ff78a.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-784ab2739ffd6bfe61a5.js"],"component---src-pages-about-mdx":["/component---src-pages-about-mdx-f288c9ed4c4a4431638a.js"],"component---src-pages-blog-tsx":["/component---src-pages-blog-tsx-43dc1e6a3a0ce88d2540.js"],"component---src-pages-books-mdx":["/component---src-pages-books-mdx-f586abd6a7610a9ee4f5.js"],"component---src-pages-contact-tsx":["/component---src-pages-contact-tsx-b8d6f6142afb756c6cad.js"],"component---src-pages-credits-mdx":["/component---src-pages-credits-mdx-37becd9b48f02cbf73d8.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-2b01e7048603ea1b63e6.js"],"component---src-pages-publications-mdx":["/component---src-pages-publications-mdx-03e86e5bda948a46aad8.js"],"component---src-pages-resume-tsx":["/component---src-pages-resume-tsx-a6e3d5e878cbc24ce93d.js"],"component---src-pages-search-tsx":["/component---src-pages-search-tsx-a41d45cf719efa9f0240.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-2f23a8b299a022cf6599.js"]};/*]]>*/</script><script src="/polyfill-f537c04a234ec55d7728.js" nomodule=""></script><script src="/component---src-templates-post-tsx-2f23a8b299a022cf6599.js" async=""></script><script src="/c9c439c49dc09dc0360bec9f4e6fbc664e7660ed-16fb8a5403b26463b9b8.js" async=""></script><script src="/cb1608f2-218510d208b0de97d0f0.js" async=""></script><script src="/app-6a81fc7d44acbeb8c5bd.js" async=""></script><script src="/framework-e65ce11b871bf77a3d80.js" async=""></script><script src="/webpack-runtime-c3c7eb42000e94358da0.js" async=""></script></body></html>